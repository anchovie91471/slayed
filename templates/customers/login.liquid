{% if customer %}
  <script>
    window.location.href = '{{ routes.account_url }}'
  </script>
{% else %}
  <div class="bg-white px-6 md:px-8 py-12">
    <div class="container mx-auto max-w-md" x-data="{ showPasswordReset: false }">

      <div class="account-login" x-show="!showPasswordReset">
        <header class="mb-8">
          <h1 class="mb-2 text-center">
            Sign In
          </h1>
        </header>

        {% form 'customer_login', return_to: routes.account_url, class: 'space-y-4' %}
          {%- if form.errors -%}
            <div class="bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg" role="alert">
              <p class="font-medium">{{ 'templates.contact.form.error_heading' | t }}</p>
              <ul class="mt-2 text-sm list-disc list-inside">
                {%- for field in form.errors -%}
                  <li>{{ form.errors.messages[field] }}</li>
                {%- endfor -%}
              </ul>
            </div>
          {%- endif -%}

          <div>
            <label for="customer-email" class="block mb-2 text-sm font-medium text-gray-900">
              Email Address
            </label>
            <input
              type="email"
              id="customer-email"
              name="customer[email]"
              autocomplete="email"
              placeholder="Email Address"
              class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5"
              required>
          </div>

          <div>
            <label for="customer-password" class="block mb-2 text-sm font-medium text-gray-900">
              Password
            </label>
            <input
              type="password"
              id="customer-password"
              name="customer[password]"
              autocomplete="current-password"
              placeholder="Password"
              class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5"
              required>
          </div>

          <button
            type="submit"
            class="w-full py-3 px-5 text-sm font-medium text-center text-white rounded-lg bg-indigo-900 hover:bg-indigo-800 focus:ring-4 focus:outline-none focus:ring-indigo-300">
            Sign In
          </button>
        {% endform %}

        <div class="mt-6 text-center space-y-2">
          <p class="text-sm text-gray-600">
            Don't have an account?
            <a href="{{ routes.account_register_url }}" class="text-indigo-900 hover:underline font-medium">
              Sign Up
            </a>
          </p>
          <p>
            <button
              type="button"
              @click="showPasswordReset = true"
              class="text-sm text-indigo-900 hover:underline font-medium">
              Forgot Password?
            </button>
          </p>
        </div>
      </div>

      <div class="account-reset-password" x-show="showPasswordReset" x-cloak>
        <header class="mb-8">
          <h1 class="mb-2 text-center">
            Reset Password
          </h1>
          <p class="text-center text-gray-600">
            We will send you an email to reset your password
          </p>
        </header>

        {% form 'recover_customer_password', class: 'space-y-4' %}
          {%- if form.errors -%}
            <div class="bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-lg" role="alert">
              <p class="font-medium">{{ 'templates.contact.form.error_heading' | t }}</p>
              <ul class="mt-2 text-sm list-disc list-inside">
                {%- for field in form.errors -%}
                  <li>{{ form.errors.messages[field] }}</li>
                {%- endfor -%}
              </ul>
            </div>
          {%- elsif form.posted_successfully? -%}
            <div class="bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg" role="alert">
              <p class="text-sm">We've sent you an email with a link to update your password.</p>
            </div>
          {%- endif -%}

          <div>
            <label for="recover-email" class="block mb-2 text-sm font-medium text-gray-900">
              Email Address
            </label>
            <input
              type="email"
              id="recover-email"
              name="email"
              autocomplete="email"
              placeholder="Email Address"
              class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5"
              required>
          </div>

          <button
            type="submit"
            class="w-full py-3 px-5 text-sm font-medium text-center text-white rounded-lg bg-indigo-900 hover:bg-indigo-800 focus:ring-4 focus:outline-none focus:ring-indigo-300">
            Submit
          </button>
        {% endform %}

        <div class="mt-6 text-center">
          <button
            type="button"
            @click="showPasswordReset = false"
            class="text-sm text-gray-600 hover:text-gray-900 hover:underline">
            Cancel
          </button>
        </div>
      </div>

    </div>
  </div>
{% endif %}
