<div class="px-6 md:px-8 py-12" data-ajax-cart-section>
    <form
            action="{{ routes.cart_url }}"
            method="post"
            id="cart">
        <div class="container mx-auto">
            {% if cart.item_count > 0 %}
                <table class="w-full border-collapse">
                    <thead class="border-b border-gray-200">
                        <tr class="text-left">
                            <th scope="col" class="pb-4 pr-4 text-sm font-medium text-gray-900">Product</th>
                            <th scope="col" class="pb-4 pr-4 text-sm font-medium text-gray-900">Price</th>
                            <th scope="col" class="pb-4 pr-4 text-sm font-medium text-gray-900">Quantity</th>
                            <th scope="col" class="pb-4 pr-4"><span class="sr-only">Actions</span></th>
                            <th scope="col" class="pb-4 text-sm font-medium text-gray-900">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for line_item in cart.items %}
                            <tr class="border-b border-gray-200">
                                <td class="py-4 pr-4 text-gray-900">
                                    {{ line_item.title }}
                                    <div data-ajax-cart-errors="{{ line_item.key }}" class="text-red-600 text-xs mt-1" role="alert" aria-live="assertive">
                                        <!-- Error messages appear here -->
                                    </div>
                                </td>
                                <td class="py-4 pr-4 text-gray-900">
                                    {{ line_item.price | money }}
                                </td>
                                <td class="py-4 pr-4">
                                    <ajax-cart-quantity class="flex items-center border border-gray-300 w-fit text-gray-700">
                                        <a href="{{ routes.cart_change_url }}?id={{ line_item.key }}&quantity={{ line_item.quantity | minus: 1 | at_least: 1 }}" data-ajax-cart-quantity-minus aria-label="Decrease quantity for {{ line_item.title }}" class="w-11 h-11 flex items-center justify-center hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-400">
                                            <svg
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    class="w-6 h-6"
                                                    aria-hidden="true"
                                                    focusable="false">
                                                <path
                                                        fill-rule="evenodd"
                                                        d="M5.25 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5H6a.75.75 0 01-.75-.75z"
                                                        clip-rule="evenodd"/>
                                            </svg>
                                        </a>
                                        <input
                                                type="number"
                                                value="{{ line_item.quantity }}"
                                                name="updates[]"
                                                data-ajax-cart-quantity-input="{{ line_item.key }}"
                                                class="w-10 h-11 border-0 border-l border-r border-gray-300 text-center [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:m-0 [&::-webkit-inner-spin-button]:m-0 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-400"
                                                aria-label="Quantity for {{ line_item.title }}"
                                                readonly>
                                        <a href="{{ routes.cart_change_url }}?id={{ line_item.key }}&quantity={{ line_item.quantity | plus: 1 }}" data-ajax-cart-quantity-plus aria-label="Increase quantity for {{ line_item.title }}" class="w-11 h-11 flex items-center justify-center hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-400">
                                            <svg
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    class="w-6 h-6"
                                                    aria-hidden="true"
                                                    focusable="false">
                                                <path
                                                        fill-rule="evenodd"
                                                        d="M12 5.25a.75.75 0 01.75.75v5.25H18a.75.75 0 010 1.5h-5.25V18a.75.75 0 01-1.5 0v-5.25H6a.75.75 0 010-1.5h5.25V6a.75.75 0 01.75-.75z"
                                                        clip-rule="evenodd"/>
                                            </svg>
                                        </a>
                                    </ajax-cart-quantity>
                                </td>
                                <td class="py-4 pr-4">
                                    <a href="{{ line_item.url_to_remove }}" @click.prevent="window.location.replace($el.href)" aria-label="Remove {{ line_item.title }} from cart" class="text-red-600 hover:text-red-700 hover:underline focus:outline-none focus:ring-2 focus:ring-red-400">Remove</a>
                                </td>
                                <td class="py-4 text-gray-900 font-medium">
                                    {{ line_item.final_line_price | money }}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <div class="py-8 flex flex-col items-end border-t border-gray-200">
                    <div class="flex items-center gap-8 mb-2.5">
                        <h3 class="text-lg font-medium text-gray-900 m-0">Subtotal</h3>
                        <p class="text-xl font-semibold text-gray-900 m-0">{{ cart.original_total_price | money }}</p>
                    </div>
                    <small class="text-sm text-gray-600 mb-4">
                        {{ section.settings['summary-message'] }}
                    </small>
                    <button
                            class="bg-gray-900 text-white px-6 py-3 font-medium hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors max-w-[350px] w-full"
                            type="submit"
                            name="checkout"
                            form="cart">
                        {{ 'sections.cart.checkout' | t }}
                    </button>
                </div>
            {% else %}
                <h1 class="text-2xl font-bold text-gray-900">You have no items in your cart.</h1>
            {% endif %}
        </div>
    </form>
</div>

{% comment %} Remove to allow user to key in quantity {% endcomment %}
{% comment %} <script>
  document.addEventListener("wheel", function(event){
    if (document.activeElement.type === "number" &&
       document.activeElement.classList.contains("noscroll"))
    {
        event.preventDefault();
        document.activeElement.blur();
    }
  });
</script> {% endcomment %}
