<style>
    .cart .cart-inner .cart-summary-row {
        padding: 30px 0;
        display: flex;
        flex-direction: column;
        align-line_items: flex-end;
    }

    .cart a {
        text-decoration: none;
    }

    .cart .cart-inner .cart-summary-row .btn {
        max-width: 350px;
    }

    .cart .error-notif {
        display: block;
        font-size: 12px;
        color: red;
    }

    .cart tr > td,
    .cart tr > th {
        padding-bottom: 1em;
    }

    .cart .loading-indicator {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        height: 16px;
        width: 16px;
    }

    .cart .loading-indicator.hidden {
        display: none;
    }

    .cart input[type="number"] {
        text-align: center;
    }

    .cart input::-webkit-outer-spin-button,
    .cart input::-webkit-inner-spin-button {
        /* display: none; <- Crashes Chrome on hover */
        -webkit-appearance: none;
        margin: 0;
        /* <-- Apparently some margin are still there even though it's hidden */
    }

    .cart input[type=number] {
        -moz-appearance: textfield;
        /* Firefox */
    }
</style>

<div class="cart px-6 md:px-8 py-12" data-ajax-cart-section>
    <form
            action="{{ routes.cart_url }}"
            method="post"
            id="cart">
        <div class="cart-inner container mx-auto">
            {% if cart.item_count > 0 %}
                <table style="width:100%">
                    <thead>
                        <tr style="text-align: left;">
                            <th scope="col">Product</th>
                            <th scope="col">Price</th>
                            <th scope="col">Quantity</th>
                            <th scope="col"><span class="sr-only">Actions</span></th>
                            <th scope="col">Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for line_item in cart.items %}
                            <tr>
                                <td>
                                    {{ line_item.title }}
                                    <div data-ajax-cart-errors="{{ line_item.key }}" style="color: red; font-size: 10px;">
                                        <!-- Error messages appear here -->
                                    </div>
                                </td>
                                <td>
                                    {{ line_item.price | money }}
                                </td>
                                <td>
                                    <ajax-cart-quantity class="flex">
                                        <a href="{{ routes.cart_change_url }}?id={{ line_item.key }}&quantity={{ line_item.quantity | minus: 1 | at_least: 1 }}" data-ajax-cart-quantity-minus aria-label="Decrease quantity for {{ line_item.title }}">
                                            <svg
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    class="w-6 h-6"
                                                    aria-hidden="true"
                                                    focusable="false">
                                                <path
                                                        fill-rule="evenodd"
                                                        d="M5.25 12a.75.75 0 01.75-.75h12a.75.75 0 010 1.5H6a.75.75 0 01-.75-.75z"
                                                        clip-rule="evenodd"/>
                                            </svg>

                                        </a>
                                        <input
                                                type="number"
                                                value="{{ line_item.quantity }}"
                                                name="updates[]"
                                                data-ajax-cart-quantity-input="{{ line_item.key }}"
                                                style="width: 40px;"
                                                class="noscroll"
                                                aria-label="Quantity for {{ line_item.title }}"
                                                readonly>
                                        <span class="loading-indicator hidden" role="alert" aria-busy="false">
                        {% render 'icon-spinner' %}
                      </span>
                                        <a href="{{ routes.cart_change_url }}?id={{ line_item.key }}&quantity={{ line_item.quantity | plus: 1 }}" data-ajax-cart-quantity-plus aria-label="Increase quantity for {{ line_item.title }}">
                                            <svg
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    viewBox="0 0 24 24"
                                                    fill="currentColor"
                                                    class="w-6 h-6"
                                                    aria-hidden="true"
                                                    focusable="false">
                                                <path
                                                        fill-rule="evenodd"
                                                        d="M12 5.25a.75.75 0 01.75.75v5.25H18a.75.75 0 010 1.5h-5.25V18a.75.75 0 01-1.5 0v-5.25H6a.75.75 0 010-1.5h5.25V6a.75.75 0 01.75-.75z"
                                                        clip-rule="evenodd"/>
                                            </svg>
                                        </a>
                                    </ajax-cart-quantity>
                                </td>
                                <td>
                                    <a href="{{ line_item.url_to_remove }}" @click.prevent="window.location.replace($el.href)" aria-label="Remove {{ line_item.title }} from cart">Remove</a>
                                </td>
                                <td>
                                    {{ line_item.final_line_price | money }}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>

                <div class="cart-summary-row py-8 flex flex-col ">
                    <div class="totals mb-[10px] flex items-center">
                        <h3 class="mr-8">Subtotal</h3>
                        <p>{{ cart.original_total_price | money }}</p>
                    </div>
                    <small class="mb-[10px]">
                        {{ section.settings['summary-message'] }}
                    </small>
                    <button
                            class="btn inverted mt-4"
                            type="submit"
                            name="checkout"
                            form="cart">
                        {{ 'sections.cart.checkout' | t }}
                    </button>
                </div>
            {% else %}
                <h1>You have no items in your cart.</h1>
            {% endif %}
        </div>
    </form>
</div>

{% comment %} Remove to allow user to key in quantity {% endcomment %}
{% comment %} <script>
  document.addEventListener("wheel", function(event){
    if (document.activeElement.type === "number" &&
       document.activeElement.classList.contains("noscroll"))
    {
        event.preventDefault();
        document.activeElement.blur();
    }
  });
</script> {% endcomment %}
