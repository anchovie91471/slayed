{%- liquid
  assign heading = section.settings.heading
  assign heading_size = section.settings.heading_size
  assign description = section.settings.description
  assign text_alignment = section.settings.text_alignment
  assign button_text = section.settings.button_text
  assign button_style = section.settings.button_style
  assign layout = section.settings.layout
  assign max_width = section.settings.max_width
  assign bg_color = section.settings.background_color

  # Text alignment classes
  case text_alignment
    when 'left'
      assign align_classes = 'text-left items-start'
    when 'center'
      assign align_classes = 'text-center items-center'
  endcase
-%}

<section class="py-12 md:py-20" style="background-color: {{ bg_color }};">
  <div class="container mx-auto px-6 md:px-8">
    <div class="flex flex-col {{ align_classes }} gap-8">
      {%- if heading != blank or description != blank -%}
        <div class="flex flex-col {{ align_classes }} gap-4">
          {%- if heading != blank -%}
            <h2 class="{{ heading_size }} font-bold text-gray-900">
              {{ heading }}
            </h2>
          {%- endif -%}

          {%- if description != blank -%}
            <p class="text-lg text-gray-600 max-w-2xl{% if text_alignment == 'center' %} mx-auto{% endif %}">
              {{ description }}
            </p>
          {%- endif -%}
        </div>
      {%- endif -%}

      <div class="w-full{% if text_alignment == 'center' %} mx-auto{% endif %}" style="max-width: {{ max_width }}px;">
        {%- form 'customer', id: 'newsletter-form', class: 'newsletter-form' -%}
          <input type="hidden" name="contact[tags]" value="newsletter">

          {%- if form.posted_successfully? -%}
            <div class="p-4 mb-4 bg-green-50 border border-green-200 rounded-lg">
              <p class="text-green-800 text-center">
                Thanks for subscribing!
              </p>
            </div>
          {%- endif -%}

          {%- if form.errors -%}
            <div class="p-4 mb-4 bg-red-50 border border-red-200 rounded-lg">
              <p class="text-red-800 text-center">
                {{ form.errors | default_errors }}
              </p>
            </div>
          {%- endif -%}

          {%- if layout == 'inline' -%}
            <div class="flex flex-col sm:flex-row gap-3">
              <div class="flex-1">
                <label for="newsletter-email" class="sr-only">Email address</label>
                <input
                  type="email"
                  name="contact[email]"
                  id="newsletter-email"
                  placeholder="Enter your email"
                  required
                  autocomplete="email"
                  class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-colors"
                >
              </div>
              <button
                type="submit"
                class="inline-flex items-center justify-center font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors px-8 py-3 text-base
                {% case button_style %}
                  {% when 'primary' %}
                    bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-500
                  {% when 'branded' %}
                    bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-400
                  {% when 'gradient' %}
                    bg-gradient-to-r from-blue-600 to-indigo-500 text-white hover:from-blue-600 hover:to-indigo-600 focus:ring-blue-400
                  {% when 'secondary' %}
                    bg-white text-gray-900 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500
                {% endcase %}
                rounded-lg whitespace-nowrap"
              >
                {{ button_text }}
              </button>
            </div>
          {%- else -%}
            <div class="flex flex-col gap-3">
              <div>
                <label for="newsletter-email" class="sr-only">Email address</label>
                <input
                  type="email"
                  name="contact[email]"
                  id="newsletter-email"
                  placeholder="Enter your email"
                  required
                  autocomplete="email"
                  class="w-full px-4 py-3 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-colors"
                >
              </div>
              <button
                type="submit"
                class="w-full inline-flex items-center justify-center font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors px-8 py-3 text-base
                {% case button_style %}
                  {% when 'primary' %}
                    bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-500
                  {% when 'branded' %}
                    bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-400
                  {% when 'gradient' %}
                    bg-gradient-to-r from-blue-600 to-indigo-500 text-white hover:from-blue-600 hover:to-indigo-600 focus:ring-blue-400
                  {% when 'secondary' %}
                    bg-white text-gray-900 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500
                {% endcase %}
                rounded-lg"
              >
                {{ button_text }}
              </button>
            </div>
          {%- endif -%}
        {%- endform -%}
      </div>
    </div>
  </div>
</section>
